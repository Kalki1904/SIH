<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Tourism Booking Payment</title>
  <link rel="stylesheet" href="style.css">
  <script src="https://cdn.jsdelivr.net/npm/ethers@6.6.4/dist/ethers.min.js"></script>
</head>
<body>
  <header class="hero">
    <h1>Blissful Bihar</h1>
    <p class="tagline">Blockchain Powered Tourism Payments</p>
  </header>

  <main class="container">
    <section class="booking-box">
      <h2>Tourism Booking</h2>
      <p class="intro">Pay securely with blockchain (Sepolia Testnet)</p>

      <label for="amount">Enter Amount (ETH):</label>
      <input id="amount" type="number" step="0.001" placeholder="e.g. 0.01">

      <button onclick="payWithMetaMask()">💳 Pay with MetaMask</button>

      <p id="walletInfo" class="wallet"></p>
      <p id="status" class="status"></p>
    </section>
  </main>

  <footer class="footer">
    <p>© 2025 Incredible India | Blockchain Tourism Demo</p>
  </footer>

<script src="https://cdnjs.cloudflare.com/ajax/libs/ethers/6.7.0/ethers.umd.min.js"></script>
<script>
  const recipient = "0xD489a13b28b9f338146504Ea4df45eBdc0E7E8d9"; // replace with your wallet

  async function payWithMetaMask() {
    try {
      if (!window.ethereum) {
        alert("MetaMask not detected! Please install MetaMask.");
        return;
      }

      const accounts = await ethereum.request({ method: "eth_requestAccounts" });
      const from = accounts[0];
      document.getElementById("walletInfo").innerText = `Connected: ${from}`;

      const provider = new ethers.BrowserProvider(window.ethereum);
      const signer = await provider.getSigner();

      const amount = document.getElementById("amount").value;
      if (!amount || amount <= 0) {
        alert("Enter a valid amount in ETH");
        return;
      }

      const tx = await signer.sendTransaction({
        to: recipient,
        value: ethers.parseEther(amount.toString())
      });

      document.getElementById("status").innerText = "⏳ Transaction submitted... Waiting for confirmation";
      await tx.wait();
      document.getElementById("status").innerText = "✅ Payment successful! Tx Hash: " + tx.hash;
    } catch (error) {
      console.error(error);
      document.getElementById("status").innerText = "❌ Transaction failed: " ;
    }
  }
</script>

</body>
</html>
